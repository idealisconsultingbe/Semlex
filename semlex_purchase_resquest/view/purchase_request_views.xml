<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Form Views -->
    <record id="semlex_purchase_request_view_form" model="ir.ui.view">
        <field name="name">semlex.purchase.request.view.form</field>
        <field name="model">purchase.request</field>
        <field name="inherit_id" ref="purchase_request.purchase_request_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='user_id']" position="after">
                <field name="valid_technical_visible" invisible="1"/>
                <field name="request_technical_id"/>
            </xpath>
            <xpath expr="//field[@name='analytic_account_id']" position="after">
                <field name="is_iso_impact" string="ISO impacts"/>
            </xpath>
            <xpath expr="//header" position="after">
                <div class="alert alert-info" role="alert" style="margin-bottom:0px;" attrs="{'invisible': [('is_iso_impact','=',False)]}">
                    <strong>
                        <span> INFO : Request with ISO impacts </span>
                    </strong>
                </div>
			</xpath>
            <xpath expr="//button[@name='button_assign']" position="after">
                 <button name="button_need_technical" groups="purchase_request.purchase_request_group_manager,purchase_request.purchase_request_group_owner" attrs="{'invisible': ['|',('technical_stage_name', '!=', 'confirmed'),('approve_visible','!=',True)]}" string="Need Technical approval" type="object" />
            </xpath>
            <xpath expr="//button[@name='button_approved']" position="after">
                <button name="button_tech_approved" groups="purchase_request.purchase_request_group_manager,purchase_request.purchase_request_group_owner" attrs="{'invisible': ['|',('technical_stage_name', 'not in', ('waiting_technical')),('valid_technical_visible','!=',True)]}" string="Approve" type="object" />
            </xpath>
            <xpath expr="//button[@name='button_assign']" position="replace"></xpath>
            <xpath expr="//button[@name='button_draft']" position="replace">
                <button name="button_draft" groups="purchase_request.purchase_request_group_manager,purchase_request.purchase_request_group_owner" attrs="{'invisible': [('technical_stage_name', 'in', ('draft','waiting_technical'))]}" string="Set to Draft" type="object" />
            </xpath>
        </field>
    </record>


</odoo>